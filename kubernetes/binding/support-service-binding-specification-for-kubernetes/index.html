<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.23.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Why Should You Support Service Binding Specification for Kubernetes? - Baiju Muthukadan</title>
<meta name="description" content="Service Binding Specification for Kubernetes standardizes exposing backing service secrets to applications.  A backing service is any process that the application consumes over the network as part of its regular operation. Examples include datastores (such as MySQL or MongoDB), caching servers (such as Memcached), and stream processing systems (such as Kafka).  If you are a backing service provider, this article gives you all the information required to evaluate Service Binding Specification for Kubernetes.  There is an expository commentary on the spec related to backing service integration.  Finally, the article has curated a list of frequently asked questions with answers.">


  <meta name="author" content="Baiju Muthukadan">
  
  <meta property="article:author" content="Baiju Muthukadan">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="Baiju Muthukadan">
<meta property="og:title" content="Why Should You Support Service Binding Specification for Kubernetes?">
<meta property="og:url" content="https://muthukadan.net/kubernetes/binding/support-service-binding-specification-for-kubernetes/">


  <meta property="og:description" content="Service Binding Specification for Kubernetes standardizes exposing backing service secrets to applications.  A backing service is any process that the application consumes over the network as part of its regular operation. Examples include datastores (such as MySQL or MongoDB), caching servers (such as Memcached), and stream processing systems (such as Kafka).  If you are a backing service provider, this article gives you all the information required to evaluate Service Binding Specification for Kubernetes.  There is an expository commentary on the spec related to backing service integration.  Finally, the article has curated a list of frequently asked questions with answers.">





  <meta name="twitter:site" content="@baijum">
  <meta name="twitter:title" content="Why Should You Support Service Binding Specification for Kubernetes?">
  <meta name="twitter:description" content="Service Binding Specification for Kubernetes standardizes exposing backing service secrets to applications.  A backing service is any process that the application consumes over the network as part of its regular operation. Examples include datastores (such as MySQL or MongoDB), caching servers (such as Memcached), and stream processing systems (such as Kafka).  If you are a backing service provider, this article gives you all the information required to evaluate Service Binding Specification for Kubernetes.  There is an expository commentary on the spec related to backing service integration.  Finally, the article has curated a list of frequently asked questions with answers.">
  <meta name="twitter:url" content="https://muthukadan.net/kubernetes/binding/support-service-binding-specification-for-kubernetes/">

  
    <meta name="twitter:card" content="summary">
    
  

  
    <meta name="twitter:creator" content="@baijum">
  



  <meta property="article:published_time" content="2021-07-18T00:00:00+05:30">





  

  


<link rel="canonical" href="https://muthukadan.net/kubernetes/binding/support-service-binding-specification-for-kubernetes/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Baiju Muthukadan",
      "url": "https://muthukadan.net/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Baiju Muthukadan Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Baiju Muthukadan
          <span class="site-subtitle">For surely there is an end;</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/article">Articles</a>
            </li><li class="masthead__menu-item">
              <a href="/about.html">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/dallas_fall2014.jpg" alt="Baiju Muthukadan" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Baiju Muthukadan</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Senior Software Engineer, Red Hat</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Bangalore, India</span>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://twitter.com/baijum" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/baijum" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Why Should You Support Service Binding Specification for Kubernetes?">
    <meta itemprop="description" content="Service Binding Specification for Kubernetes standardizes exposingbacking service secrets to applications.  A backing service is any processthat the application consumes over the network as part of its regular operation.Examples include datastores (such as MySQL or MongoDB), caching servers (such asMemcached), and stream processing systems (such as Kafka).  If you are a backingservice provider, this article gives you all the information required toevaluate Service Binding Specification for Kubernetes.  There is an expositorycommentary on the spec related to backing service integration.  Finally, thearticle has curated a list of frequently asked questions with answers.">
    <meta itemprop="datePublished" content="2021-07-18T00:00:00+05:30">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Why Should You Support Service Binding Specification for Kubernetes?
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-07-18T00:00:00+05:30">July 18, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><a href="https://github.com/servicebinding/spec">Service Binding Specification</a> for Kubernetes standardizes exposing
backing service secrets to applications.  A <em>backing service</em> is any process
that the application consumes over the network as part of its regular operation.
Examples include datastores (such as MySQL or MongoDB), caching servers (such as
Memcached), and stream processing systems (such as Kafka).  If you are a backing
service provider, this article gives you all the information required to
evaluate Service Binding Specification for Kubernetes.  There is an expository
commentary on the spec related to backing service integration.  Finally, the
article has curated a list of frequently asked questions with answers.</p>

<p>The spec <a href="https://github.com/servicebinding/spec#service-binding-specification-for-kubernetes">introduction</a> presents a good summary of the importance of
the specification.  The key benefit for supporting the spec for a backing
service is that the Secret resource will be collected and exposed to
applications consistently and predictably.</p>

<p>Few facts about the spec:</p>

<ul>
  <li>The spec is a collective effort of a community working with Kuberentes.</li>
  <li>Contributions from many organizations including VMware, IBM, and Red Hat.</li>
  <li>The spec is matured and general availability release 1.0.0 came out in March 2022</li>
  <li>The <a href="https://github.com/servicebinding/spec#provisioned-service">Provisioned Service</a> part for backing service is stable and ready for adoption</li>
</ul>

<h2 id="projects-with-support-for-service-binding">Projects with Support for Service Binding</h2>

<p>Currently the spec is getting adopted by the Kuberentes community. Here is a
list of projects with support for Service Binding:</p>

<ul>
  <li><a href="https://camel.apache.org/camel-k/latest/traits/service-binding.html">https://camel.apache.org/camel-k/latest/traits/service-binding.html</a></li>
  <li><a href="https://quarkus.io/guides/deploying-to-kubernetes#service-binding">https://quarkus.io/guides/deploying-to-kubernetes#service-binding</a></li>
  <li><a href="https://paketo.io/docs/reference/configuration/#bindings">https://paketo.io/docs/reference/configuration/#bindings</a></li>
  <li><a href="https://servicebinding.io/application-developer/">Language-specific Libraries for .NET, Go, Java, NodeJS, Python, Ruby, Rust</a></li>
</ul>

<h2 id="operator-implementations">Operator Implementations</h2>

<ol>
  <li><a href="https://github.com/servicebinding/service-binding-controller">Service Binding Controller</a> - Reference Implementation by the community</li>
  <li><a href="https://github.com/redhat-developer/service-binding-operator">Red Hat implementation</a></li>
  <li><a href="https://github.com/vmware-labs/service-bindings">VMware implementation</a></li>
</ol>

<h2 id="provisioned-service">Provisioned Service</h2>

<p><a href="https://github.com/servicebinding/spec#provisioned-service">Provisioned Service</a> is the key abstraction used in the
spec to define a backing service.  The spec consider Provisioned Service as a
duck type with a definition like this:</p>

<blockquote>
  <p>Any type that meets the contract defined in a specification, without being an
instance of a specific concrete type.  For example, for specification that
requires a given key on <code class="language-plaintext highlighter-rouge">status</code>, any resource that has that key on its
<code class="language-plaintext highlighter-rouge">status</code> regardless of its kind would be considered a duck type of the
specification.</p>
</blockquote>

<p>The Provisioned Service section starts like this:</p>

<blockquote>
  <p>A Provisioned Service resource <strong>MUST</strong> define a <code class="language-plaintext highlighter-rouge">.status.binding</code> which is a
<code class="language-plaintext highlighter-rouge">LocalObjectReference</code>-able (containing a single field <code class="language-plaintext highlighter-rouge">name</code>) to a <code class="language-plaintext highlighter-rouge">Secret</code>.</p>
</blockquote>

<p>The
<a href="https://pkg.go.dev/k8s.io/api/core/v1#LocalObjectReference">LocalObjectReference</a>
is a type with <code class="language-plaintext highlighter-rouge">name</code> field.  The name should point to a Secret resource with
data entries for the application to connect to the backing service.  Service
Binding recociler will project the Secret values in to the application as
defined in the <a href="https://github.com/servicebinding/spec#application-projection">Application
Projection</a>
section of the spec.  As you can see the sentence has the key word <strong>MUST</strong> in
full capital and bold, that indicates this is a mandatory requirement to comform
to the spec.</p>

<p>This is the next mandatory requirement:</p>

<blockquote>
  <p>The <code class="language-plaintext highlighter-rouge">Secret</code> <strong>MUST</strong> be in the same namespace as the resource.</p>
</blockquote>

<p>If the provisioned service and applications are in different namespaces, users
may consider using <a href="https://github.com/IBM/ibm-secretshare-operator">IBM SecretShare
Operator</a> to sync the Secret
resource across namespace.</p>

<p>The next sentence is not a mandate, but a recommendation:</p>

<blockquote>
  <p>The <code class="language-plaintext highlighter-rouge">Secret</code> data <strong>SHOULD</strong> contain a <code class="language-plaintext highlighter-rouge">type</code> entry with a value that
identifies the abstract classification of the binding.</p>
</blockquote>

<p>This is a recommendation to the provisioned service, but when it comes to the
Application Projection, it becomes a mandatory requirement as part of the
projected bindings data.  Even if the provisioned service provides a value for
<code class="language-plaintext highlighter-rouge">type</code>, it is possible to override the value from the <code class="language-plaintext highlighter-rouge">ServiceBinding</code> resource.</p>

<p>There is no standardization on the value for <code class="language-plaintext highlighter-rouge">type</code>, but you can see some good
examples used in the <a href="https://github.com/spring-cloud/spring-cloud-bindings#auto-configurations">Spring Cloud
Bindings</a>.
Few examples:</p>

<ul>
  <li>cassandra</li>
  <li>couchbase</li>
  <li>db2</li>
  <li>elasticsearch</li>
  <li>kafka</li>
  <li>ldap</li>
  <li>mongodb</li>
  <li>mysql</li>
  <li>neo4j</li>
  <li>oracle</li>
  <li>postgresql</li>
  <li>rabbitmq</li>
  <li>redis</li>
  <li>sqlserver</li>
  <li>vault</li>
</ul>

<p>Next recommendation:</p>

<blockquote>
  <p>The <code class="language-plaintext highlighter-rouge">Secret</code> type (<code class="language-plaintext highlighter-rouge">.type</code> verses <code class="language-plaintext highlighter-rouge">.data.type</code>) <strong>SHOULD</strong> reflect this value
as <code class="language-plaintext highlighter-rouge">service.binding/{type}</code>, replacing <code class="language-plaintext highlighter-rouge">{type}</code> with the <code class="language-plaintext highlighter-rouge">Secret</code> data type.</p>
</blockquote>

<p>This recommendation helps to query Secret resources of particular type using
field-selector.  For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get secrets --field-selector="type=service.binding/postgresql"
</code></pre></div></div>

<p>will give the Secret resources of <code class="language-plaintext highlighter-rouge">postgresql</code> type/</p>

<p>Next recommendation:</p>

<blockquote>
  <p>It is <strong>RECOMMENDED</strong> that the <code class="language-plaintext highlighter-rouge">Secret</code> data also contain a <code class="language-plaintext highlighter-rouge">provider</code> entry
with a value that identifies the provider of the binding.</p>
</blockquote>

<p>The <code class="language-plaintext highlighter-rouge">provider</code> field helps to narrow down the tye further in the application.
The provider field could be used where there are different providers for the
same Provisioned Service type.  For example, if the type is <code class="language-plaintext highlighter-rouge">mysql</code>, the
provider value could be <code class="language-plaintext highlighter-rouge">mariadb</code>, <code class="language-plaintext highlighter-rouge">oracle</code>, <code class="language-plaintext highlighter-rouge">bitnami</code>, <code class="language-plaintext highlighter-rouge">aws-rds</code>, etc.  When
the application is reading the binding values, if necessary, the application
could consider <code class="language-plaintext highlighter-rouge">type</code> and <code class="language-plaintext highlighter-rouge">provider</code> as a composite key to avoid ambiguity.</p>

<p>Next recommendation:</p>

<blockquote>
  <p>The <code class="language-plaintext highlighter-rouge">Secret</code> data <strong>MAY</strong> contain any other entry.</p>
</blockquote>

<p>Apart from the <code class="language-plaintext highlighter-rouge">type</code> and <code class="language-plaintext highlighter-rouge">provider</code> entries, the Secret data can include
<code class="language-plaintext highlighter-rouge">username</code>, <code class="language-plaintext highlighter-rouge">password</code>, <code class="language-plaintext highlighter-rouge">host</code>, <code class="language-plaintext highlighter-rouge">port</code> etc.</p>

<p>Next recommendation:</p>

<blockquote>
  <p>To facilitate discoverability, it is <strong>RECOMMENDED</strong> that a
<code class="language-plaintext highlighter-rouge">CustomResourceDefinition</code> exposing a Provisioned Service add
<code class="language-plaintext highlighter-rouge">service.binding/provisioned-service: "true"</code> as a label.</p>
</blockquote>

<p>This helps to find all the Provisioned Service custom resouces.  For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get customresourcedefinitions.apiextensions.k8s.io -l "service.binding/provisioned-service=true"
</code></pre></div></div>

<p>Next there is a side note:</p>

<blockquote>
  <p>Note: While the Provisioned Service referenced <code class="language-plaintext highlighter-rouge">Secret</code> data should contain a
<code class="language-plaintext highlighter-rouge">type</code> entry, the <code class="language-plaintext highlighter-rouge">type</code> must be defined before it is projected into an
application workload.  This allows a mapping to enrich an existing secret.</p>
</blockquote>

<p>This is already discussed earlier.</p>

<p>Next recommendation:</p>

<blockquote>
  <p>Extensions and implementations <strong>MAY</strong> define additional mechanisms to consume
a Provisioned Service that does not conform to the duck type.</p>
</blockquote>

<p>This recommendation is added to unblock any extensions or implementations with
special requirements.</p>

<h3 id="well-known-secret-entries">Well-known Secret Entries</h3>

<p>This is the mandatory requirement about <a href="https://github.com/servicebinding/spec#well-known-secret-entries">well-known Secret
entries</a>.
Thought, it is acceptable not to include any of these entries in the Secret
resource.</p>

<blockquote>
  <p>Other than the recommended <code class="language-plaintext highlighter-rouge">type</code> and <code class="language-plaintext highlighter-rouge">provider</code> entries, there are no other
reserved <code class="language-plaintext highlighter-rouge">Secret</code> entries.  In the interests of consistency, if a <code class="language-plaintext highlighter-rouge">Secret</code>
includes any of the following entry names, the entry value <strong>MUST</strong> meet the
specified requirements:</p>
</blockquote>

<p>If the Provisioned Service doesn’t include any of the following entry names, no
need to follow the given requirements.</p>

<blockquote>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Requirements</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">host</code></td>
        <td>A DNS-resolvable host name or IP address</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">port</code></td>
        <td>A valid port number</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">uri</code></td>
        <td>A valid URI as defined by <a href="https://tools.ietf.org/html/rfc3986">RFC3986</a></td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">username</code></td>
        <td>A string-based username credential</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">password</code></td>
        <td>A string-based password credential</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">certificates</code></td>
        <td>A collection of PEM-encoded X.509 certificates, representing a certificate chain used in mTLS client authentication</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">private-key</code></td>
        <td>A PEM-encoded private key used in mTLS client authentication</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<p>For Go based operators, you may consider using
<a href="https://gist.github.com/baijum/76c443f8be1c0528c0dcc0818df6dfa2">the code I wrote here</a>
package to validate these entries.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">Secret</code> entries that do not meet these requirements <strong>MUST</strong> use different entry names.</p>
</blockquote>

<p>If there is any entry that doesn’t follow the given requirement, you can choose
different names.  For example, if there is a URI-like string but not a valid
one, as per RFC-3986, use another name (e.g., “custom-uri”).</p>

<h3 id="considerations-for-role-based-access-control-rbac">Considerations for Role-Based Access Control (RBAC)</h3>

<p>The spec has support for Role-Based Access Control (RBAC).  Since the service
binding reconciler needs permission to read Provisioned Service resources, there
is a mandate about <a href="https://github.com/servicebinding/spec#role-based-access-control-rbac">RBAC</a> like this:</p>

<blockquote>
  <p>If a service binding reconciler implementation is using Role-Based Access
Control (RBAC) it <strong>MUST</strong> define an <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#aggregated-clusterroles">aggregated <code class="language-plaintext highlighter-rouge">ClusterRole</code></a> with a
label selector matching the label <code class="language-plaintext highlighter-rouge">service.binding/controller=true</code>.</p>
</blockquote>

<p>So, there must be a <code class="language-plaintext highlighter-rouge">ClusterRole</code> configured in the Kubernetes cluster something
like this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">...</span>
<span class="na">aggregationRule</span><span class="pi">:</span>
  <span class="na">clusterRoleSelectors</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="s">service.binding/controller</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
<span class="na">rules</span><span class="pi">:</span> <span class="pi">[]</span> <span class="c1"># The control plane automatically fills in the rules</span>
</code></pre></div></div>

<p>There is a recommendation for backing service about RBAC:</p>

<blockquote>
  <p>Cluster operators and CRD authors <strong>SHOULD</strong> opt-in resources to expose
provisioned services by defining a <code class="language-plaintext highlighter-rouge">ClusterRole</code> with a label matching
<code class="language-plaintext highlighter-rouge">service.binding/controller=true</code>, the <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">list</code>, and <code class="language-plaintext highlighter-rouge">watch</code> verbs
<strong>MUST</strong> be granted.</p>
</blockquote>

<p>As a backing service author, you can offer a <code class="language-plaintext highlighter-rouge">ClusterRole</code> with that same label
(<code class="language-plaintext highlighter-rouge">service.binding/controller=true</code>) and the verbs (<code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">list</code>, and <code class="language-plaintext highlighter-rouge">watch</code>)
listed in the rules.  Here is an example <code class="language-plaintext highlighter-rouge">ClusterRole</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kubepostgres-service-bindings</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="s">service.binding/controller</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span> <span class="c1"># matches the aggregation rule selector</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">kubepostgres.dev</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">databases</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
  <span class="pi">-</span> <span class="s">list</span>
  <span class="pi">-</span> <span class="s">watch</span>
</code></pre></div></div>

<p>In the above example, the API group for the backing service CRD is
<code class="language-plaintext highlighter-rouge">kubepostgres.dev</code> and the resource name (plural form) is <code class="language-plaintext highlighter-rouge">databases</code>.  You can
change those values as per your Provisioned Service.  While your operator is
getting installed, make sure this cluster role is also installed.  For example,
if you us Helm charts, you can add the above <code class="language-plaintext highlighter-rouge">ClusterRole</code> configuration into a
file inside the template directory (e.g., <code class="language-plaintext highlighter-rouge">templates/rbac.yaml</code>).</p>

<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>

<h3 id="is-it-possible-to-use-separate-namespaces-for-provisioned-services-and-applications">Is it possible to use separate namespaces for Provisioned Services and applications?</h3>

<p>Current spec has a strong recommendation to restrict service binding to
provisioned service within the same namespace.</p>

<blockquote>
  <p>Restricting service binding to resources within the same namespace is strongly <strong>RECOMMENDED</strong>.</p>
</blockquote>

<p>(<em>From <a href="https://github.com/servicebinding/spec#service-binding">2nd
paragraph</a> of
Service Binding section</em>)</p>

<p>If your provisioned service and applications are in different namespaces, you
may consider using <a href="https://github.com/IBM/ibm-secretshare-operator">IBM SecretShare
Operator</a> to sync the Secret
resource across namespace.</p>

<h3 id="is-it-okay-to-replace-the-secret-resource-name-when-there-is-a-change-in-any-of-the-entries">Is it okay to replace the Secret resource name when there is a change in any of the entries?</h3>

<p>Yes, it is a good practice to update <code class="language-plaintext highlighter-rouge">.status.binding.name</code> field value with the
new name of the Secret resource. After the update, remove the old Secret
resource from the cluster. That should trigger Service Binding reconciliation
and, in turn, update the projected bindings. This will trigger recreation of the
pod. That’s the advantage of <a href="https://hackernoon.com/level-triggering-and-reconciliation-in-kubernetes-1f17fe30333d">level triggering and reconciliation</a> in Kubernetes!</p>

<p>Note: Changing the values in the Secret will reflect almost immediately in
application workload file-system. However, most of the applications will not be
designed to watch for file-system changes or even reconecting if the service
connection fail. Whereas if the pod restarts, the appllicaton will get the new
values and continue to work. The application may face a short downtime, if
not architected properly.</p>

<p><strong>Update 1:</strong> Updated on 2022-07-21 with more detail</p>


        
      </section>

      <footer class="page__meta">
        
        


  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#binding" class="page__taxonomy-item" rel="tag">binding</a><span class="sep">, </span>
    
      <a href="/categories/#kubernetes" class="page__taxonomy-item" rel="tag">kubernetes</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-07-18T00:00:00+05:30">July 18, 2021</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=baijum&text=Why+Should+You+Support+Service+Binding+Specification+for+Kubernetes%3F%20https%3A%2F%2Fmuthukadan.net%2Fkubernetes%2Fbinding%2Fsupport-service-binding-specification-for-kubernetes%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmuthukadan.net%2Fkubernetes%2Fbinding%2Fsupport-service-binding-specification-for-kubernetes%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fmuthukadan.net%2Fkubernetes%2Fbinding%2Fsupport-service-binding-specification-for-kubernetes%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/kubernetes/binding/paketo-bindings-for-spring-boot-applications/" class="pagination--pager" title="Paketo Bindings for Spring Boot Applications
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/kubernetes/binding/paketo-bindings-for-spring-boot-applications/" rel="permalink">Paketo Bindings for Spring Boot Applications
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-07-07T00:00:00+05:30">July 7, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Service Binding Specification
for Kubernetes standardizes exposing backing service secrets to applications.
The application should be prepared to use the bin...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/github/ci/github-actions-for-pull-requests/" rel="permalink">GitHub Actions for pull requests
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-05-30T00:00:00+05:30">May 30, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">GitHub Actions provides a well-integrated CI/CD system for code hosted on
GitHub.  If you want to build and run tests when someone sends pull requests,
you c...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/golang/book/expectations-for-an-introductory-programming-book/" rel="permalink">Expectations for an introductory programming book
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2018-11-19T00:00:00+05:30">November 19, 2018</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">After I published my last blog post requesting technical
reviews
of my Go book, I received quite a few responses from
the Go community. Thanks to all who cam...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/golang/book/request-for-technical-review-of-my-go-book/" rel="permalink">Request for Technical Review of My Go Book
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2018-11-07T00:00:00+05:30">November 7, 2018</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">In the last blog post, I mentioned that I started working on my book
about the Go programming language again.  I think now is a good time
to ask for technica...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/baijum" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/baijum" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Baiju Muthukadan. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
